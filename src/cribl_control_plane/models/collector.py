"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .collectorazureblob import CollectorAzureBlob, CollectorAzureBlobTypedDict
from .collectorcribllake import CollectorCriblLake, CollectorCriblLakeTypedDict
from .collectordatabase import CollectorDatabase, CollectorDatabaseTypedDict
from .collectorfilesystem import CollectorFilesystem, CollectorFilesystemTypedDict
from .collectorgooglecloudstorage import (
    CollectorGoogleCloudStorage,
    CollectorGoogleCloudStorageTypedDict,
)
from .collectorhealthcheck import CollectorHealthCheck, CollectorHealthCheckTypedDict
from .collectorrest import CollectorRest, CollectorRestTypedDict
from .collectors3 import CollectorS3, CollectorS3TypedDict
from .collectorscript import CollectorScript, CollectorScriptTypedDict
from .collectorsplunk import CollectorSplunk, CollectorSplunkTypedDict
from cribl_control_plane.types import BaseModel
from cribl_control_plane.utils.unions import parse_open_union
from functools import partial
from pydantic import ConfigDict
from pydantic.functional_validators import BeforeValidator
from typing import Any, Literal, Union
from typing_extensions import Annotated, TypeAliasType


CollectorTypedDict = TypeAliasType(
    "CollectorTypedDict",
    Union[
        CollectorAzureBlobTypedDict,
        CollectorCriblLakeTypedDict,
        CollectorDatabaseTypedDict,
        CollectorFilesystemTypedDict,
        CollectorGoogleCloudStorageTypedDict,
        CollectorHealthCheckTypedDict,
        CollectorRestTypedDict,
        CollectorS3TypedDict,
        CollectorScriptTypedDict,
        CollectorSplunkTypedDict,
    ],
)
r"""Collector configuration"""


class UnknownCollector(BaseModel):
    r"""A Collector variant the SDK doesn't recognize. Preserves the raw payload."""

    type: Literal["UNKNOWN"] = "UNKNOWN"
    raw: Any
    is_unknown: Literal[True] = True

    model_config = ConfigDict(frozen=True)


_COLLECTOR_VARIANTS: dict[str, Any] = {
    "azure_blob": CollectorAzureBlob,
    "cribl_lake": CollectorCriblLake,
    "database": CollectorDatabase,
    "filesystem": CollectorFilesystem,
    "google_cloud_storage": CollectorGoogleCloudStorage,
    "health_check": CollectorHealthCheck,
    "rest": CollectorRest,
    "s3": CollectorS3,
    "script": CollectorScript,
    "splunk": CollectorSplunk,
}


Collector = Annotated[
    Union[
        CollectorAzureBlob,
        CollectorCriblLake,
        CollectorDatabase,
        CollectorFilesystem,
        CollectorGoogleCloudStorage,
        CollectorHealthCheck,
        CollectorRest,
        CollectorS3,
        CollectorScript,
        CollectorSplunk,
        UnknownCollector,
    ],
    BeforeValidator(
        partial(
            parse_open_union,
            disc_key="type",
            variants=_COLLECTOR_VARIANTS,
            unknown_cls=UnknownCollector,
            union_name="Collector",
        )
    ),
]
r"""Collector configuration"""
