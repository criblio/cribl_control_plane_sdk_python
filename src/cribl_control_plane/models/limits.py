"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .edgeheartbeatmetricsmode import EdgeHeartbeatMetricsMode
from cribl_control_plane import models
from cribl_control_plane.types import BaseModel
from cribl_control_plane.utils import validate_open_enum
import pydantic
from pydantic import field_serializer
from pydantic.functional_validators import PlainValidator
from typing import List, Optional
from typing_extensions import Annotated, NotRequired, TypedDict


class SamplesTypedDict(TypedDict):
    max_size: str


class Samples(BaseModel):
    max_size: Annotated[str, pydantic.Field(alias="maxSize")]


class LimitsTypedDict(TypedDict):
    cpu_profile_ttl: str
    enable_metrics_persistence: bool
    metrics_directory: str
    metrics_fields_blacklist: List[str]
    metrics_gc_period: str
    metrics_never_drop_list: List[str]
    metrics_worker_id_blacklist: List[str]
    min_free_space: str
    samples: SamplesTypedDict
    disable_metrics_accessor_cache: NotRequired[bool]
    edge_metrics_custom_expression: NotRequired[str]
    edge_metrics_mode: NotRequired[EdgeHeartbeatMetricsMode]
    edge_nodes_count: NotRequired[float]
    enable_worker_persistence: NotRequired[bool]
    events_metadata_sources: NotRequired[List[str]]
    large_events_threshold: NotRequired[str]
    lookup_max_size: NotRequired[str]
    lookup_max_total_size: NotRequired[str]
    max_dimension_value_size: NotRequired[float]
    max_metrics: NotRequired[float]
    max_pq_size: NotRequired[str]
    max_reconnect_interval: NotRequired[str]
    metrics_drop_list: NotRequired[List[str]]
    metrics_max_cardinality: NotRequired[float]
    metrics_max_disk_space: NotRequired[str]
    min_reconnect_interval: NotRequired[str]
    net_flow_template_flush_interval: NotRequired[float]
    random_reconnect_interval: NotRequired[str]
    worker_max_metrics: NotRequired[float]


class Limits(BaseModel):
    cpu_profile_ttl: Annotated[str, pydantic.Field(alias="cpuProfileTTL")]

    enable_metrics_persistence: Annotated[
        bool, pydantic.Field(alias="enableMetricsPersistence")
    ]

    metrics_directory: Annotated[str, pydantic.Field(alias="metricsDirectory")]

    metrics_fields_blacklist: Annotated[
        List[str], pydantic.Field(alias="metricsFieldsBlacklist")
    ]

    metrics_gc_period: Annotated[str, pydantic.Field(alias="metricsGCPeriod")]

    metrics_never_drop_list: Annotated[
        List[str], pydantic.Field(alias="metricsNeverDropList")
    ]

    metrics_worker_id_blacklist: Annotated[
        List[str], pydantic.Field(alias="metricsWorkerIdBlacklist")
    ]

    min_free_space: Annotated[str, pydantic.Field(alias="minFreeSpace")]

    samples: Samples

    disable_metrics_accessor_cache: Annotated[
        Optional[bool], pydantic.Field(alias="disableMetricsAccessorCache")
    ] = None

    edge_metrics_custom_expression: Annotated[
        Optional[str], pydantic.Field(alias="edgeMetricsCustomExpression")
    ] = None

    edge_metrics_mode: Annotated[
        Annotated[
            Optional[EdgeHeartbeatMetricsMode],
            PlainValidator(validate_open_enum(False)),
        ],
        pydantic.Field(alias="edgeMetricsMode"),
    ] = None

    edge_nodes_count: Annotated[
        Optional[float], pydantic.Field(alias="edgeNodesCount")
    ] = None

    enable_worker_persistence: Annotated[
        Optional[bool], pydantic.Field(alias="enableWorkerPersistence")
    ] = None

    events_metadata_sources: Annotated[
        Optional[List[str]], pydantic.Field(alias="eventsMetadataSources")
    ] = None

    large_events_threshold: Annotated[
        Optional[str], pydantic.Field(alias="largeEventsThreshold")
    ] = None

    lookup_max_size: Annotated[Optional[str], pydantic.Field(alias="lookupMaxSize")] = (
        None
    )

    lookup_max_total_size: Annotated[
        Optional[str], pydantic.Field(alias="lookupMaxTotalSize")
    ] = None

    max_dimension_value_size: Annotated[
        Optional[float], pydantic.Field(alias="maxDimensionValueSize")
    ] = None

    max_metrics: Annotated[Optional[float], pydantic.Field(alias="maxMetrics")] = None

    max_pq_size: Annotated[Optional[str], pydantic.Field(alias="maxPQSize")] = None

    max_reconnect_interval: Annotated[
        Optional[str], pydantic.Field(alias="maxReconnectInterval")
    ] = None

    metrics_drop_list: Annotated[
        Optional[List[str]], pydantic.Field(alias="metricsDropList")
    ] = None

    metrics_max_cardinality: Annotated[
        Optional[float], pydantic.Field(alias="metricsMaxCardinality")
    ] = None

    metrics_max_disk_space: Annotated[
        Optional[str], pydantic.Field(alias="metricsMaxDiskSpace")
    ] = None

    min_reconnect_interval: Annotated[
        Optional[str], pydantic.Field(alias="minReconnectInterval")
    ] = None

    net_flow_template_flush_interval: Annotated[
        Optional[float], pydantic.Field(alias="netFlowTemplateFlushInterval")
    ] = None

    random_reconnect_interval: Annotated[
        Optional[str], pydantic.Field(alias="randomReconnectInterval")
    ] = None

    worker_max_metrics: Annotated[
        Optional[float], pydantic.Field(alias="workerMaxMetrics")
    ] = None

    @field_serializer("edge_metrics_mode")
    def serialize_edge_metrics_mode(self, value):
        if isinstance(value, str):
            try:
                return models.EdgeHeartbeatMetricsMode(value)
            except ValueError:
                return value
        return value
