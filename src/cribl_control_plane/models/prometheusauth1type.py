"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from cribl_control_plane import models, utils
from cribl_control_plane.types import BaseModel
from cribl_control_plane.utils import validate_open_enum
from enum import Enum
import pydantic
from pydantic import field_serializer
from pydantic.functional_validators import PlainValidator
from typing import Optional
from typing_extensions import Annotated, NotRequired, TypedDict


class PrometheusAuth1TypeAuthenticationType(str, Enum, metaclass=utils.OpenEnumMeta):
    # None
    NONE = "none"
    # Auth token
    TOKEN = "token"
    # Auth token (text secret)
    TEXT_SECRET = "textSecret"
    # Basic
    BASIC = "basic"
    # Basic (credentials secret)
    CREDENTIALS_SECRET = "credentialsSecret"


class PrometheusAuth1TypeTypedDict(TypedDict):
    auth_type: NotRequired[PrometheusAuth1TypeAuthenticationType]
    token: NotRequired[str]
    r"""Bearer token to include in the authorization header. In Grafana Cloud, this is generally built by concatenating the username and the API key, separated by a colon. Example: <your-username>:<your-api-key>"""
    text_secret: NotRequired[str]
    r"""Select or create a stored text secret"""
    username: NotRequired[str]
    r"""Username for authentication"""
    password: NotRequired[str]
    r"""Password (API key in Grafana Cloud domain) for authentication"""
    credentials_secret: NotRequired[str]
    r"""Select or create a secret that references your credentials"""


class PrometheusAuth1Type(BaseModel):
    auth_type: Annotated[
        Annotated[
            Optional[PrometheusAuth1TypeAuthenticationType],
            PlainValidator(validate_open_enum(False)),
        ],
        pydantic.Field(alias="authType"),
    ] = PrometheusAuth1TypeAuthenticationType.BASIC

    token: Optional[str] = None
    r"""Bearer token to include in the authorization header. In Grafana Cloud, this is generally built by concatenating the username and the API key, separated by a colon. Example: <your-username>:<your-api-key>"""

    text_secret: Annotated[Optional[str], pydantic.Field(alias="textSecret")] = None
    r"""Select or create a stored text secret"""

    username: Optional[str] = None
    r"""Username for authentication"""

    password: Optional[str] = None
    r"""Password (API key in Grafana Cloud domain) for authentication"""

    credentials_secret: Annotated[
        Optional[str], pydantic.Field(alias="credentialsSecret")
    ] = None
    r"""Select or create a secret that references your credentials"""

    @field_serializer("auth_type")
    def serialize_auth_type(self, value):
        if isinstance(value, str):
            try:
                return models.PrometheusAuth1TypeAuthenticationType(value)
            except ValueError:
                return value
        return value
