"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from cribl_control_plane import models, utils
from cribl_control_plane.types import BaseModel
from cribl_control_plane.utils import validate_open_enum
from enum import Enum
import pydantic
from pydantic import field_serializer
from pydantic.functional_validators import PlainValidator
from typing import Optional
from typing_extensions import Annotated, NotRequired, TypedDict


class Sasl1TypeAuthTypeAuthenticationMethod(str, Enum, metaclass=utils.OpenEnumMeta):
    r"""Enter password directly, or select a stored secret"""

    MANUAL = "manual"
    SECRET = "secret"


class Sasl1TypeSASLMechanism(str, Enum, metaclass=utils.OpenEnumMeta):
    # PLAIN
    PLAIN = "plain"
    # OAUTHBEARER
    OAUTHBEARER = "oauthbearer"


class Sasl1TypeClientSecretAuthTypeAuthenticationMethod(
    str, Enum, metaclass=utils.OpenEnumMeta
):
    MANUAL = "manual"
    SECRET = "secret"
    CERTIFICATE = "certificate"


class Sasl1TypeMicrosoftEntraIDAuthenticationEndpoint(
    str, Enum, metaclass=utils.OpenEnumMeta
):
    r"""Endpoint used to acquire authentication tokens from Azure"""

    HTTPS_LOGIN_MICROSOFTONLINE_COM = "https://login.microsoftonline.com"
    HTTPS_LOGIN_MICROSOFTONLINE_US = "https://login.microsoftonline.us"
    HTTPS_LOGIN_PARTNER_MICROSOFTONLINE_CN = "https://login.partner.microsoftonline.cn"


class Sasl1TypeTypedDict(TypedDict):
    r"""Authentication parameters to use when connecting to brokers. Using TLS is highly recommended."""

    disabled: NotRequired[bool]
    auth_type: NotRequired[Sasl1TypeAuthTypeAuthenticationMethod]
    r"""Enter password directly, or select a stored secret"""
    password: NotRequired[str]
    r"""Connection-string primary key, or connection-string secondary key, from the Event Hubs workspace"""
    text_secret: NotRequired[str]
    r"""Select or create a stored text secret"""
    mechanism: NotRequired[Sasl1TypeSASLMechanism]
    username: NotRequired[str]
    r"""The username for authentication. For Event Hubs, this should always be $ConnectionString."""
    client_secret_auth_type: NotRequired[
        Sasl1TypeClientSecretAuthTypeAuthenticationMethod
    ]
    client_secret: NotRequired[str]
    r"""client_secret to pass in the OAuth request parameter"""
    client_text_secret: NotRequired[str]
    r"""Select or create a stored text secret"""
    certificate_name: NotRequired[str]
    r"""Select or create a stored certificate"""
    cert_path: NotRequired[str]
    priv_key_path: NotRequired[str]
    passphrase: NotRequired[str]
    oauth_endpoint: NotRequired[Sasl1TypeMicrosoftEntraIDAuthenticationEndpoint]
    r"""Endpoint used to acquire authentication tokens from Azure"""
    client_id: NotRequired[str]
    r"""client_id to pass in the OAuth request parameter"""
    tenant_id: NotRequired[str]
    r"""Directory ID (tenant identifier) in Azure Active Directory"""
    scope: NotRequired[str]
    r"""Scope to pass in the OAuth request parameter"""


class Sasl1Type(BaseModel):
    r"""Authentication parameters to use when connecting to brokers. Using TLS is highly recommended."""

    disabled: Optional[bool] = False

    auth_type: Annotated[
        Annotated[
            Optional[Sasl1TypeAuthTypeAuthenticationMethod],
            PlainValidator(validate_open_enum(False)),
        ],
        pydantic.Field(alias="authType"),
    ] = Sasl1TypeAuthTypeAuthenticationMethod.MANUAL
    r"""Enter password directly, or select a stored secret"""

    password: Optional[str] = None
    r"""Connection-string primary key, or connection-string secondary key, from the Event Hubs workspace"""

    text_secret: Annotated[Optional[str], pydantic.Field(alias="textSecret")] = None
    r"""Select or create a stored text secret"""

    mechanism: Annotated[
        Optional[Sasl1TypeSASLMechanism], PlainValidator(validate_open_enum(False))
    ] = Sasl1TypeSASLMechanism.PLAIN

    username: Optional[str] = "$ConnectionString"
    r"""The username for authentication. For Event Hubs, this should always be $ConnectionString."""

    client_secret_auth_type: Annotated[
        Annotated[
            Optional[Sasl1TypeClientSecretAuthTypeAuthenticationMethod],
            PlainValidator(validate_open_enum(False)),
        ],
        pydantic.Field(alias="clientSecretAuthType"),
    ] = Sasl1TypeClientSecretAuthTypeAuthenticationMethod.MANUAL

    client_secret: Annotated[Optional[str], pydantic.Field(alias="clientSecret")] = None
    r"""client_secret to pass in the OAuth request parameter"""

    client_text_secret: Annotated[
        Optional[str], pydantic.Field(alias="clientTextSecret")
    ] = None
    r"""Select or create a stored text secret"""

    certificate_name: Annotated[
        Optional[str], pydantic.Field(alias="certificateName")
    ] = None
    r"""Select or create a stored certificate"""

    cert_path: Annotated[Optional[str], pydantic.Field(alias="certPath")] = None

    priv_key_path: Annotated[Optional[str], pydantic.Field(alias="privKeyPath")] = None

    passphrase: Optional[str] = None

    oauth_endpoint: Annotated[
        Annotated[
            Optional[Sasl1TypeMicrosoftEntraIDAuthenticationEndpoint],
            PlainValidator(validate_open_enum(False)),
        ],
        pydantic.Field(alias="oauthEndpoint"),
    ] = Sasl1TypeMicrosoftEntraIDAuthenticationEndpoint.HTTPS_LOGIN_MICROSOFTONLINE_COM
    r"""Endpoint used to acquire authentication tokens from Azure"""

    client_id: Annotated[Optional[str], pydantic.Field(alias="clientId")] = None
    r"""client_id to pass in the OAuth request parameter"""

    tenant_id: Annotated[Optional[str], pydantic.Field(alias="tenantId")] = None
    r"""Directory ID (tenant identifier) in Azure Active Directory"""

    scope: Optional[str] = None
    r"""Scope to pass in the OAuth request parameter"""

    @field_serializer("auth_type")
    def serialize_auth_type(self, value):
        if isinstance(value, str):
            try:
                return models.Sasl1TypeAuthTypeAuthenticationMethod(value)
            except ValueError:
                return value
        return value

    @field_serializer("mechanism")
    def serialize_mechanism(self, value):
        if isinstance(value, str):
            try:
                return models.Sasl1TypeSASLMechanism(value)
            except ValueError:
                return value
        return value

    @field_serializer("client_secret_auth_type")
    def serialize_client_secret_auth_type(self, value):
        if isinstance(value, str):
            try:
                return models.Sasl1TypeClientSecretAuthTypeAuthenticationMethod(value)
            except ValueError:
                return value
        return value

    @field_serializer("oauth_endpoint")
    def serialize_oauth_endpoint(self, value):
        if isinstance(value, str):
            try:
                return models.Sasl1TypeMicrosoftEntraIDAuthenticationEndpoint(value)
            except ValueError:
                return value
        return value
